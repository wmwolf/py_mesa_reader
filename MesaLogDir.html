<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MesaLogDir &mdash; PyMesaReader 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PyMesaReader 0.1.0 documentation" href="index.html" />
    <link rel="prev" title="MesaProfileIndex" href="MesaProfileIndex.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MesaProfileIndex.html" title="MesaProfileIndex"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyMesaReader 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="MesaProfileIndex.html"
                        title="previous chapter">MesaProfileIndex</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/MesaLogDir.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-mesa_reader">
<span id="mesalogdir"></span><h1>MesaLogDir<a class="headerlink" href="#module-mesa_reader" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="mesa_reader.MesaLogDir">
<em class="property">class </em><tt class="descclassname">mesa_reader.</tt><tt class="descname">MesaLogDir</tt><big>(</big><em>log_path='LOGS'</em>, <em>profile_prefix='profile'</em>, <em>profile_suffix='data'</em>, <em>history_file='history.data'</em>, <em>index_file='profiles.index'</em>, <em>memoize_profiles=True</em><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Structure providing access to both history and profile output from MESA</p>
<p>Provides access for accessing the history and profile data of a MESA run
by linking profiles to the history through model numbers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>log_path</strong> : string, optional</p>
<blockquote>
<div><p>Path to the logs directory, default is &#8216;LOGS&#8217;</p>
</div></blockquote>
<p><strong>profile_prefix</strong> : string, optional</p>
<blockquote>
<div><p>Prefix before profile number in profile file names,
default is &#8216;profile&#8217;</p>
</div></blockquote>
<p><strong>profile_suffix</strong> : string, optional</p>
<blockquote>
<div><p>Suffix after profile number and period for profile file
names, default is &#8216;data&#8217;</p>
</div></blockquote>
<p><strong>history_file</strong> : string, optional</p>
<blockquote>
<div><p>Name of the history file in the logs directory, default
is &#8216;history.data&#8217;</p>
</div></blockquote>
<p><strong>index_file</strong> : string, optional</p>
<blockquote>
<div><p>Name of the profiles index file in the logs directory,
default is &#8216;profiles.index&#8217;</p>
</div></blockquote>
<p><strong>memoize_profiles</strong> : bool, optional</p>
<blockquote class="last">
<div><p>Determines whether or not profiles will be &#8220;memo-ized&#8221;,
default is True. If memoized, once a profile is called
into existence, it is saved so that it need not be read
in again. Good for quick, clean, repeated access of a 
profile, but bad for reading in many profiles for
one-time uses as it will hog memory.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>log_path</td>
<td>string</td>
<td>Path to the logs directory; used (re-)reading data in</td>
</tr>
<tr class="row-even"><td>profile_prefix</td>
<td>string</td>
<td>Prefix before profile number in profile file names</td>
</tr>
<tr class="row-odd"><td>profile_suffix</td>
<td>string</td>
<td>Suffix after profile number and period for profile file
names</td>
</tr>
<tr class="row-even"><td>history_file</td>
<td>string</td>
<td>Base name (not path) of the history file in the logs
directory</td>
</tr>
<tr class="row-odd"><td>index_file</td>
<td>string</td>
<td>Base name (not path) of the profiles index file in the
logs directory</td>
</tr>
<tr class="row-even"><td>memoize_profiles</td>
<td>bool</td>
<td>Determines whether or not profiles will be &#8220;memo-ized&#8221;.
Setting this after initialization will not delete
profiles from memory. It will simply start/stop memoizing
them. To clear out memoized profiles, re-read the data
with <cite>self.read_logs()</cite></td>
</tr>
<tr class="row-odd"><td>history_path</td>
<td>string</td>
<td>Path to the history data file</td>
</tr>
<tr class="row-even"><td>index_path</td>
<td>string</td>
<td>Path to the profile index file</td>
</tr>
<tr class="row-odd"><td>history</td>
<td>MesaData</td>
<td>MesaData object containing history information from
<cite>self.history_path</cite></td>
</tr>
<tr class="row-even"><td>history_data</td>
<td>MesaData</td>
<td>Alias for <cite>self.history</cite></td>
</tr>
<tr class="row-odd"><td>profiles</td>
<td>MesaProfileIndex</td>
<td>MesaProfileIndex from profiles in <cite>self.index_path</cite></td>
</tr>
<tr class="row-even"><td>profile_numbers</td>
<td>numpy_array</td>
<td>Result of calling <cite>self.profiles.profile_numbers</cite>. Just
the profile numbers of the simulation in order of
corresponding model numbers.</td>
</tr>
<tr class="row-odd"><td>model_numbers</td>
<td>numpy_array</td>
<td>Result of calling <cite>self.profiles.model_numbers</cite>. Just
the model numbers of the simulations that have
corresponding profiles in ascending order.</td>
</tr>
<tr class="row-even"><td>profile_dict</td>
<td>dictionary</td>
<td>Stores MesaData objects from profiles. Keys to this
dictionary are profile numbers, so presumably
<cite>self.profile_dict(5)</cite> would yield the MesaData object
obtained from the file <cite>profile5.data</cite> (assuming
reasonable defaults) if such a profile was ever accessed.
Will remain empty if memoization is shut off.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="mesa_reader.MesaLogDir.have_profile_with_model_number">
<tt class="descname">have_profile_with_model_number</tt><big>(</big><em>m_num</em><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir.have_profile_with_model_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir.have_profile_with_model_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if a model number has a corresponding profile number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>m_num</strong> : int</p>
<blockquote>
<div><p>model number to be checked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bool</strong> :</p>
<blockquote class="last">
<div><p>True if the model number is in <cite>self.model_numbers</cite>, otherwise
False.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mesa_reader.MesaLogDir.have_profile_with_profile_number">
<tt class="descname">have_profile_with_profile_number</tt><big>(</big><em>p_num</em><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir.have_profile_with_profile_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir.have_profile_with_profile_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if a given number is a valid profile number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>p_num</strong> : int</p>
<blockquote>
<div><p>profile number to be checked</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bool</strong> :</p>
<blockquote class="last">
<div><p>True if profile number is in <cite>self.profile_numbers</cite>, otherwise
False.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mesa_reader.MesaLogDir.profile_data">
<tt class="descname">profile_data</tt><big>(</big><em>model_number=-1</em>, <em>profile_number=-1</em><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir.profile_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir.profile_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate or retrieve MesaData from a model or profile number.</p>
<p>If both a model number and a profile number is given, the model number
takes precedence. If neither are given, the default is to return a
MesaData object of the last profile (biggest model number). In either
case, this generates (if it doesn&#8217;t already exist) or retrieves (if it
has already been generated and memoized) a MesaData object from the
corresponding profile data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model_number</strong> : int, optional</p>
<blockquote>
<div><p>model number for the profile MesaData object desired. 
Default is -1, corresponding to the last model number.</p>
</div></blockquote>
<p><strong>profile_number</strong> : int, optional</p>
<blockquote>
<div><p>profile number for the profile MesaData object desired.
Default is -1, corresponding to the last model number.
If both <cite>model_number</cite> and <cite>profile_number</cite> are given,
<cite>profile_number</cite> is ignored.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>MesaData</strong> :</p>
<blockquote class="last">
<div><p>Data for profile with desired model/profile number.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mesa_reader.MesaLogDir.profile_with_model_number">
<tt class="descname">profile_with_model_number</tt><big>(</big><em>m_num</em><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir.profile_with_model_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir.profile_with_model_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a model number to a corresponding profile number</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>m_num</strong> : int</p>
<blockquote>
<div><p>model number to be converted</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>int</strong> :</p>
<blockquote class="last">
<div><p>profile number that corresponds to <cite>m_num</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mesa_reader.MesaLogDir.read_logs">
<tt class="descname">read_logs</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir.read_logs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir.read_logs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read (or re-read) data from the history and profile index.</p>
<p>Reads in <cite>self.history_path</cite> and <cite>self.index_file</cite> for use in getting
history data and profile information. This is automatically called at
instantiation, but can be recalled by the user if for some reason the
data needs to be refreshed (for instance, after changing some of the
reader methods to read in specially-formatted output.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong> :</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>None</strong> :</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mesa_reader.MesaLogDir.select_models">
<tt class="descname">select_models</tt><big>(</big><em>f</em>, <em>*keys</em><big>)</big><a class="reference internal" href="_modules/mesa_reader.html#MesaLogDir.select_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mesa_reader.MesaLogDir.select_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields model numbers for profiles that satisfy a given criteria.</p>
<p>Given a function <cite>f</cite> of various time-domain (history) variables,
<cite>*keys</cite> (i.e., categories in <cite>self.history.bulk_names</cite>), filters
<cite>self.model_numbers</cite> and returns all model numbers that satisfy the
criteria.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>f</strong> : function</p>
<blockquote>
<div><p>A function of the same number of parameters as strings given
for <cite>keys</cite> that returns a boolean. Should evaluate to <cite>True</cite>
when condition is met and <cite>False</cite> otherwise.</p>
</div></blockquote>
<p><strong>keys</strong> : strings</p>
<blockquote>
<div><p>Name of data categories from <cite>self.history.bulk_names</cite> whose 
values are to be used in the arguments to <cite>f</cite>, in the same order
that they appear as arguments in <cite>f</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>numpy_array</strong> :</p>
<blockquote>
<div><p>Array of model numbers that have corresponding profiles
where the condition given by <cite>f</cite> is <cite>True</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>KeyError</strong> :</p>
<blockquote class="last">
<div><p>If any of the <cite>keys</cite> are invalid history keys.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">MesaLogDir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">is_old_and_bright</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="n">log_lum</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mf">1e9</span> <span class="ow">and</span> <span class="n">log_lum</span> <span class="o">&gt;</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m_nums</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">select_models</span><span class="p">(</span><span class="n">is_old_and_bright</span><span class="p">,</span> <span class="s">&#39;star_age&#39;</span><span class="p">,</span> <span class="s">&#39;log_L&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>Here, <cite>m_nums</cite> will contain all model numbers that have profiles where
the age is greater than a billion years and the luminosity is greater
than 1000 Lsun, provided that &#8216;star_age&#8217; and &#8216;log_L&#8217; are in
<cite>self.history.bulk_names</cite>.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MesaProfileIndex.html" title="MesaProfileIndex"
             >previous</a> |</li>
        <li><a href="index.html">PyMesaReader 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Bill Wolf.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>